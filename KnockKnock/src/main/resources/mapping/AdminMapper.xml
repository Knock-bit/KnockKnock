<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="AdminDAO">

	<!-- 유저 리스트 전체 출력 -->
	<select id="getUserList" parameterType="adminUserVO"
		resultType="AdminUserVO">
		SELECT * FROM USERS
	</select>
	<!-- 1명 유저 가져오기 -->
	<select id="getUser" parameterType="adminUserVO"
		resultType="AdminUserVO">
		SELECT * FROM USERS WHERE U_IDX=#{uIdx}
	</select>
	<!-- 활성상태 -->
	<update id="updateUserActive" parameterType="adminUserVO">
		UPDATE USERS
		<trim prefix="SET">
			<if test="uActive == 1">U_ACTIVE = 0</if>
			<if test="uActive == 0">U_ACTIVE = 1</if>
		</trim>
		WHERE U_IDX=#{uIdx}
	</update>
	<!-- 키워드 리스트 출력 -->
	<select id="getKeywordList" resultType="adminKeywordVO">
		SELECT * FROM KEYWORD
		ORDER BY K_CONTENT
	</select>

	<!-- 키워드 추가 -->
	<insert id="insertKeyword" parameterType="adminKeywordVO">
		INSERT INTO KEYWORD
		(K_IDX, K_CONTENT) VALUES(K_IDX_SEQ.nextval,#{kContent})
	</insert>

	<!-- 키워드 중복 확인 -->
	<select id="checkKeyword" resultType="Integer"
		parameterType="adminKeywordVO">
		SELECT COUNT(*) FROM KEYWORD WHERE K_CONTENT =
		#{kContent}
	</select>
<!-- <foreach collection="list" item="item" index="index" separator="or"> -->
	<!-- 키워드 삭제 -->
	<delete id="deleteKeyword" parameterType="java.util.List">
		DELETE FROM KEYWORD WHERE
		K_CONTENT IN
		<foreach collection="list" index="index" item="item" open="(" close=")" separator=","> 
		#{item}
		</foreach> 
	</delete>
	
	<!-- ======== proposal =========== -->
	<select id="getProposal" parameterType="adminProposalVO" resultType="adminProposalVO">
		SELECT * FROM PROPOSAL WHERE CP_IDX =#{cpIdx}
	</select>
	
	<!-- 썸머노트 insert -->
	<insert id="insertSummer" parameterType="adminSummerVO">
		INSERT INTO TEST(TEST_IDX, CONTENT, TITLE) VALUES (#{testIdx}, #{content}, #{title})
	</insert>
	<!-- 썸머노트 select -->
	<select id="selectSummer" resultType="adminSummerVO">
		SELECT * FROM TEST WhERE TEST_IDX = 44444
	</select>

</mapper>